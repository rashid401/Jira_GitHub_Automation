# ü§ñ GitHub-Jira Automation Bot

[![Python Version](https://img.shields.io/badge/python-3.14-blue.svg)](https://www.python.org/)
[![Redis Version](https://img.shields.io/badge/redis-8.4-red.svg)](https://redis.io/)
[![Docker](https://img.shields.io/badge/docker-compose-blue.svg)](https://www.docker.com/)

A high-performance, containerized middleware that transforms GitHub issue comments into Jira tickets. Built with a **Redis Deduplication Shield** to prevent race conditions and duplicate ticket creation from GitHub's retry logic.

---

## üèóÔ∏è Architecture Overview

The system operates as a microservice stack managed by Docker Compose:

1.  **Flask Bot (Python 3.14-alpine):** The core logic engine. It validates GitHub signatures, parses payloads, and interfaces with the Jira REST API.
2.  **Redis Cache (8.4.0-alpine):** The "Short-term Memory." It stores unique `X-GitHub-Delivery` IDs for 24 hours to ensure every webhook is processed exactly once.
3.  **Persistence Layer:** Logs are mounted to the host machine for real-time monitoring and historical auditing.



---

## üõ†Ô∏è Tech Stack & Features

* **Python 3.14 (Alpine):** Leveraging the latest performance improvements and minimal image size.
* **Redis 8.4:** High-speed deduplication with automatic 24-hour TTL (Time-To-Live).
* **Gunicorn:** Production-grade WSGI server for handling concurrent requests.
* **Deduplication Shield:** Instant rejection of duplicate GitHub delivery attempts.
* **Robust Logging:** Integrated `RotatingFileHandler` to prevent disk exhaustion.

### üîÑ Bidirectional Sync
- **Jira Creation:** Automatically generates tickets based on GitHub comment triggers.
- **GitHub Feedback:** Once a ticket is created, the bot automatically comments on the GitHub issue with a direct link to the Jira ticket, ensuring the development team stays informed without leaving GitHub.

---

## üö¶ Getting Started

### 1. Project Structure
```text
.
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ fully_automated_jira_github.py  # Application Entry Point
‚îÇ   ‚îú‚îÄ‚îÄ config.py                       # Configuration Management
‚îÇ   ‚îî‚îÄ‚îÄ requirements.txt                # Dependency Manifest
‚îú‚îÄ‚îÄ logs/                               # Persistent Log Files
‚îú‚îÄ‚îÄ .env                                # Environment Secrets
‚îú‚îÄ‚îÄ Dockerfile                          # Bot Image Build Script
‚îî‚îÄ‚îÄ docker-compose.yml                  # Service Orchestration

```

### 2. Environment Setup

Create a `.env` file in the root directory and populate it with your credentials:

```bash
# Set to True for local development, False for production
FLASK_DEBUG=False #Default value is false
PORT=8000

# Log file location
LOG_FILE=/app/logs/github_jira_automation.log

# Jira Credentials
JIRA_SERVER=[https://your-domain.atlassian.net](https://your-domain.atlassian.net)
JIRA_USER=your-email@example.com
JIRA_API_TOKEN=your_jira_token
JIRA_PROJECT_KEY=Your_server_key

# GitHub Security
GITHUB_WEBHOOK_SECRET=your_secret_here
GITHUB_TOKEN=ghp_your_token_here

# --- Redis Configuration ---
# REDIS_HOST = redis_service #<define your redis service name (redi-service)> # HOST is directly embedded in docker-compose file
REDIS_PORT = 6379
```

### 3. Deployment

Deploy the entire stack with a single command:

```bash
docker-compose up -d --build

```

---

## üìä Operations & Maintenance

### Monitoring Logs

Watch the bot process events in real-time:

```bash
docker logs -f jira-bot

```

### Investigating the Cache

To see how many IDs are currently stored in the Redis shield:

```bash
docker exec -it redis_service redis-cli info keyspace

```

### Manual Cache Reset

If you need to force-reprocess a specific event window:

```bash
docker exec -it redis_service redis-cli flushall

```

---

## üõ°Ô∏è Security Best Practices

* **Signature Verification:** The bot rejects any request that doesn't match the `X-Hub-Signature-256` generated by GitHub.
* **Minimalist Images:** Using `alpine` variants for both Python and Redis to reduce the attack surface.
* **Network Isolation:** Redis is not exposed to the public internet; it is only reachable by the Bot container within the internal Docker bridge network.

---

## ü§ù Contributing & Support

I am very open to feedback, and contributions from the community to improve the automation Bot! 

If you encounter any bugs, performance issues, or have suggestions for new features:
1. Check the [Existing Issues](https://github.com/rashid401/Jira_GitHub_Automation/issues) to see if it has already been reported.
2. If not, please **[Open a New Issue](https://github.com/rashid401/Jira_GitHub_Automation/issues/new)**.
3. Provide as much detail as possible, including:
   - A clear description of the bug.
   - Steps to reproduce the issue.
   - Relevant log snippets from `docker logs jira-bot`.

---
### üìö Want to Learn More?

If you're interested in the technologies used in this project, these official resources are excellent for deep-diving into the core concepts:

* **[Flask Documentation](https://flask.palletsprojects.com/)** ‚Äì Learn more about the Python web framework used to handle the webhooks.
* **[Jira Cloud REST API Reference](https://developer.atlassian.com/cloud/jira/platform/rest/v3/intro/)** ‚Äì Explore the endpoints available for automating Jira tasks.
* **[GitHub Webhook Security](https://docs.github.com/en/webhooks/using-webhooks/validating-webhook-deliveries)** ‚Äì A guide on how to secure your integrations using HMAC signatures.
* **[Redis Documentation](https://redis.io/documentation)** ‚Äì Understand more about key-value stores and how TTL (Time-To-Live) works for caching.